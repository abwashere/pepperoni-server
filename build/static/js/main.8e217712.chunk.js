(this["webpackJsonppepperoni-client"]=this["webpackJsonppepperoni-client"]||[]).push([[0],{100:function(e,t,a){},101:function(e,t,a){},186:function(e,t,a){"use strict";a.r(t);var r=a(1),s=a.n(r),n=a(21),c=a.n(n),i=(a(100),a(101),a(14)),l=a(13),o=a(4),u=a(95),d=a(9),j=a(90),b=a(0),m=["component"],p=function(e){var t=e.component,a=Object(u.a)(e,m),r=Object(d.c)((function(e){return e.authStore}));return Object(b.jsx)(l.Route,Object(o.a)(Object(o.a)({},a),{},{render:function(e){return!0===r.isAuthentificated?Object(b.jsx)(t,Object(o.a)({},e)):Object(b.jsx)(j.Redirect,{to:"/admin/login"})}}))},h=function(){return Object(b.jsxs)("div",{className:"NotFound",children:[Object(b.jsx)("h3",{className:"sub-title",children:"404 Not Found"}),Object(b.jsxs)("div",{children:["The page that your are looking for does not exist. ",Object(b.jsx)("br",{}),"Go back to the"," ",Object(b.jsx)(i.b,{to:"/",style:{padding:"0",textDecoration:"underline"},children:"home page"}),"."]})]})},O=a(6),f=a.n(O),x=a(10),v=a(28),g=a.n(v),N=g.a.create({baseURL:"https://pepperoni-restaurant.vercel.app/api/auth",withCredentials:!0}),y={service:N,registerUser:function(e){return N.post("/signup",e)},login:function(e){return N.post("/login",e)},isLoggedIn:function(e){return N.get("isLoggedIn/".concat(e))},logout:function(){return N.get("/logout")}},M=y,w=function(e,t){return{type:e,error:!0,payload:t}},S=function(e){return function(){var t=Object(x.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,M.registerUser(e);case 3:r=t.sent,a({type:"auth/registerUser",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(w("auth/registerUser_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},k=Object(l.withRouter)((function(e){var t=Object(d.c)((function(e){return e.authStore})),a=Object(d.b)();return Object(b.jsx)("div",{className:"NavLinksAuth",children:Object(b.jsxs)("ul",{className:"flex-row",children:[!t.isAuthentificated&&Object(b.jsx)("li",{children:Object(b.jsx)(i.c,{to:"/admin/login",className:"nav-link",children:"Personnel"})}),t.isAuthentificated&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("li",{className:"nav-link",style:{cursor:"default"},children:[t.user.privileges," : ",Object(b.jsx)("b",{children:t.user.firstName})]}),"admin"===t.user.privileges&&Object(b.jsx)(i.c,{to:"/admin/staff",className:"nav-link",children:"Liste du Personnel"}),Object(b.jsx)("li",{onClick:function(){a(function(){var e=Object(x.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.logout();case 3:a=e.sent,localStorage.removeItem("sessionCookie"),localStorage.removeItem("sessionUser"),t({type:"auth/logout",payload:a.data}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),t(w("auth/logout_error",e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}()),setTimeout((function(){a((function(e){e({type:"auth/clearMessages"})}))}),4e3),e.history.push("/admin/login")},className:"nav-link",children:"D\xe9connexion"})]})]})})})),_=Object(l.withRouter)((function(){return Object(d.c)((function(e){return e.authStore})).isAuthentificated?Object(b.jsx)("div",{className:"NavLinks",children:Object(b.jsxs)("ul",{className:"flex-row sp-center",children:[Object(b.jsx)("li",{children:Object(b.jsx)(i.c,{to:"/admin/menu/update",className:"nav-link",children:"Modifier la carte"})}),Object(b.jsx)("li",{children:Object(b.jsx)(i.c,{to:"/admin/reservations",className:"nav-link",children:"Voir les r\xe9servations"})})]})}):Object(b.jsx)("div",{})})),C=Object(l.withRouter)((function(e){return Object(b.jsx)("div",{className:"NavLinks",children:Object(b.jsxs)("ul",{className:"flex-row sp-center",children:[Object(b.jsx)("li",{children:Object(b.jsx)(i.b,{to:"/menu",className:"nav-link",children:"La Carte"})}),Object(b.jsx)("li",{children:Object(b.jsx)(i.b,{to:"/reservation",className:"nav-link",children:"R\xe9server une table"})})]})})})),R=function(){return Object(b.jsxs)("div",{className:"NavMain flex-col sp-btw",children:[Object(b.jsx)(k,{}),Object(b.jsxs)("header",{className:"nav-header",children:[Object(b.jsx)(i.b,{to:"/",children:Object(b.jsx)("h1",{className:"nav-title",children:"Pepperoni ."})}),Object(b.jsxs)("h2",{className:"nav-subtitle",children:[Object(b.jsx)("span",{children:"Italian"})," cuisine",Object(b.jsx)("span",{children:" in Paris"})]})]}),Object(b.jsx)(_,{}),Object(b.jsx)(C,{})]})},E=function(){return Object(b.jsxs)("div",{className:"Banner flex-col sp-center",children:[Object(b.jsx)("h1",{className:"title",children:"Pepperoni ."}),Object(b.jsxs)("h2",{className:"banner-title",children:[Object(b.jsx)("span",{children:"Italian"})," cuisine",Object(b.jsx)("span",{children:" in Paris"})]})]})},A=function(){return Object(b.jsxs)("div",{className:"About flex-row sp-center",children:[Object(b.jsx)("div",{className:"chef-image"}),Object(b.jsxs)("div",{className:"chef-presentation",children:[Object(b.jsx)("h2",{className:"sub-title",children:"Le mot du Chef"}),Object(b.jsxs)("p",{className:"citation",children:['"Lorem ipsum dolor sit amet consectetur adipisicing elit. Quas maxime quidem voluptate nihil nisi. Perspiciatis voluptatum delectus omnis, et veritatis distinctio quis non cupiditate nesciunt, molestiae rerum maxime voluptas. ',Object(b.jsx)("br",{}),' Grazie."']}),Object(b.jsx)("p",{className:"chef-signature",children:"Toni 'Peppe' Mattarella"})]})]})},L=a(17),U=a(54),D=[{url:a.p+"static/media/restau-1.59b7cdd1.jpg",alt:"Le Bar"},{url:a.p+"static/media/restau-2.0fa5b68f.jpg",alt:"La Cuisine"},{url:a.p+"static/media/restau-3.fa53906b.jpg",alt:"La Salle"},{url:a.p+"static/media/restau-4.33c6db4b.jpg",alt:"La Salle"},{url:a.p+"static/media/restau-5.1030acde.jpg",alt:"La Salle"},{url:a.p+"static/media/restau-6.12de278b.jpg",alt:"La Terrasse"}],I=function(){var e=s.a.useState(0),t=Object(L.a)(e,2),a=t[0],r=t[1];return Object(b.jsx)(U.a,{activeIndex:a,onSelect:function(e,t){r(e)},className:"Carousel",children:D.map((function(e,t){return Object(b.jsxs)(U.a.Item,{interval:4e3,children:[Object(b.jsx)("img",{className:"d-block w-9 carousel-pic",src:e.url,alt:e.alt}),Object(b.jsx)(U.a.Caption,{children:Object(b.jsx)("p",{children:e.alt})})]},t)}))})},P=function(){return Object(b.jsxs)("div",{className:"Gallery",children:[Object(b.jsx)("h2",{className:"sub-title",children:"Le restaurant"}),Object(b.jsx)("div",{className:"carousel-container",children:Object(b.jsx)(I,{})})]})},T=function(){return Object(b.jsxs)("div",{className:"Home",children:[Object(b.jsx)(E,{}),Object(b.jsx)(A,{}),Object(b.jsx)(P,{})]})},q=g.a.create({baseURL:"https://pepperoni-restaurant.vercel.app/api/food",withCredentials:!0}),F={service:q,getAllFood:function(){return q.get()},getMeal:function(e){return q.get("/".concat(e))},createMeal:function(e){return q.post("/create",e)},updateMeal:function(e,t){return q.patch("/edit/".concat(e),t)},deleteMeal:function(e){return q.delete("/delete/".concat(e))}},V=F,z=function(e,t){return{type:e,error:!0,payload:t}},J=function(){return function(){var e=Object(x.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,V.getAllFood();case 3:a=e.sent,t({type:"food/getMenu",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(z("food/getMenu_error",e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},B=function(e){return function(){var t=Object(x.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.createMeal(e);case 3:r=t.sent,a({type:"food/create",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(z("food/create_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},G=function(e,t){return function(){var a=Object(x.a)(f.a.mark((function a(r){var s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,V.updateMeal(e,t);case 3:s=a.sent,r({type:"food/update",payload:s.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r(z("food/update_error",a.t0));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},H=function(e){var t=Object(d.c)((function(e){return e.foodStore.menu})),a=Object(d.b)();return Object(r.useEffect)((function(){a(J())}),[a]),Object(b.jsxs)("div",{className:"Menu",children:[Object(b.jsx)("h3",{className:"sub-title",children:"La Carte"}),Object(b.jsxs)("div",{className:"menu menu-starters",children:[Object(b.jsx)("h4",{children:"Antipasti"}),Object(b.jsx)("table",{children:Object(b.jsx)("tbody",{children:t.map((function(e){return"antipasti"===e.category&&Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"dish-name",children:e.foodName}),Object(b.jsx)("td",{className:"dish-description",children:e.description}),Object(b.jsxs)("td",{className:"dish-price",children:[e.price," \u20ac"]})]},e._id)}))})})]}),Object(b.jsxs)("div",{className:"menu menu-mains",children:[Object(b.jsx)("h4",{children:"Plats"}),Object(b.jsx)("table",{children:Object(b.jsx)("tbody",{children:t.map((function(e){return"principal"===e.category&&Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{className:"dish-name",children:e.foodName}),Object(b.jsx)("td",{className:"dish-description",children:e.description}),Object(b.jsxs)("td",{className:"dish-price",children:[e.price," \u20ac"]})]},e._id)}))})})]}),Object(b.jsxs)("div",{className:"menu menu-deserts",children:[Object(b.jsx)("h4",{children:"Desserts"}),Object(b.jsx)("table",{children:Object(b.jsx)("tbody",{children:t.map((function(e){return"dessert"===e.category&&Object(b.jsx)("tr",{children:Object(b.jsxs)("th",{className:"dish-name",children:[e.foodName," ",Object(b.jsxs)("span",{className:"dish-price",children:[" - ",e.price," \u20ac"]})]})},e._id)}))})})]})]})},X=a(27),Q=a(51),K=g.a.create({baseURL:"https://pepperoni-restaurant.vercel.app/api/tables",withCredentials:!0}),W={service:K,getAllReservations:function(){return K.get("/reservations")},postSlot:function(e){return K.post("/slot",e)},postReservation:function(e){return K.post("/reservation",e)},cancelReservation:function(e){return K.patch("/cancelation",e)},getTables:function(){return K.get("/")},getSlot:function(e){return K.get("/slot/".concat(e))}},Y=W,Z=function(e,t){return{type:e,error:!0,payload:t}},$=function(){return function(){var e=Object(x.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,Y.getAllReservations();case 3:a=e.sent,t({type:"reservation/getReservations",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Z("reservation/getReservations_error",e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},ee=function(e){return function(){var t=Object(x.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.postReservation(e);case 3:r=t.sent,a({type:"reservation/create",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(Z("reservation/create_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},te=function(e,t){return function(){var a=Object(x.a)(f.a.mark((function a(r){var s;return f.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Y.cancelReservation({slotID:e,tableID:t});case 3:s=a.sent,r({type:"reservation/cancel",payload:s.data}),a.next=10;break;case 7:a.prev=7,a.t0=a.catch(0),r(Z("reservation/cancel_error",a.t0));case 10:case"end":return a.stop()}}),a,null,[[0,7]])})));return function(e){return a.apply(this,arguments)}}()},ae=a(91),re=a.n(ae),se=(a(130),["12h00","12h30","13h00","13h30","14h00"]),ne=["19h00","19h30","20h00","20h30","21h00","21h30","22h00"],ce=[].concat(se,ne),ie=[{day:0,hours:se},{day:1,hours:[]},{day:2,hours:ne},{day:3,hours:ce},{day:4,hours:ce},{day:5,hours:ce},{day:6,hours:ce}],le=function(){var e,t=Object(d.b)(),a=Object(d.c)((function(e){return e.reservationStore.slot}));a&&(e=Math.max.apply(Math,Object(Q.a)(a.tables.map((function(e){return e.capacity})))));var s=Object(d.c)((function(e){return e.reservationStore.successMessage})),n=Object(d.c)((function(e){return e.reservationStore.errorMessage})),c=Object(r.useState)(!1),i=Object(L.a)(c,2),l=i[0],u=i[1],j=Object(r.useState)(new Date),m=Object(L.a)(j,2),p=m[0],h=m[1],O=Object(r.useState)(""),v=Object(L.a)(O,2),g=v[0],N=v[1],y=ie.filter((function(e){return e.day===(null===p||void 0===p?void 0:p.getDay())}))[0].hours,M=Object(r.useState)({slotID:"",seats:"",client:{clientName:"",clientPhone:"",clientEmail:""}}),w=Object(L.a)(M,2),S=w[0],k=w[1];Object(r.useEffect)((function(){var e,a;p&&g&&(t((e=p,a=g,function(){var t=Object(x.a)(f.a.mark((function t(r){var s;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Y.postSlot({requestedDate:e,requestedTime:a});case 3:s=t.sent,r({type:"reservation/slot",payload:s.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),r(Z("reservation/slot_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),u(!0))}),[p,g]),Object(r.useEffect)((function(){a&&k(Object(o.a)(Object(o.a)({},S),{},{slotID:a._id}))}),[a]);var _=function(e){if(null===n||void 0===n?void 0:n[e])return"unavailability"===e?Object(b.jsxs)("div",{className:"form-error-msg",children:[n.unavailability,Object(b.jsx)("br",{})," :("]}):Object(b.jsxs)("div",{className:"form-error-msg",children:[Object(b.jsx)("i",{className:"fas fa-exclamation-triangle"}),"   ",n[e]]})},C=function(e){var t=e.target.name,a=e.target.value;"time"===t?N(a):k("seats"===t?Object(o.a)(Object(o.a)({},S),{},{seats:Number(a)}):Object(o.a)(Object(o.a)({},S),{},{client:Object(o.a)(Object(o.a)({},S.client),{},Object(X.a)({},t,a))}))},R=function(){var e=Object(x.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),e.next=3,t(ee(S));case 3:setTimeout((function(){t((function(e){e({type:"reservation/clearMessages"})}))}),1e4);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"ReservationForm form-container",children:[s&&Object(b.jsx)("div",{className:"info-box",children:s}),Object(b.jsx)("form",{className:"mui-form",onChange:C,onSubmit:R,children:Object(b.jsxs)("div",{className:"flex-row",children:[Object(b.jsxs)("div",{className:"form-left-side",children:[Object(b.jsxs)("div",{className:"mui-select",children:[Object(b.jsx)(re.a,{className:"datepicker",dateFormat:"yyyy-MM-dd",minDate:new Date,maxDate:(new Date).setMonth((new Date).getMonth()+2),filterDate:function(e){return function(e,t,a){var r=new Date(e).getDay();return r!==t&&r!==a}(e,1)},selected:p,onChange:function(e){h(e),N("")},required:!0}),Object(b.jsx)("label",{children:"Date"})]}),Object(b.jsxs)("div",{className:"mui-select",children:[Object(b.jsxs)("select",{name:"time",onChange:C,value:g,required:!0,children:[Object(b.jsx)("option",{hidden:!0,children:"Choix"}),y&&y.map((function(e,t){return Object(b.jsx)("option",{children:e},t)}))]}),Object(b.jsx)("label",{children:"Heure"})]}),_("time"),_("unavailability")]}),l&&Object(b.jsxs)("div",{className:"form-right-side",children:[Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"number",min:"1",max:e,name:"seats",onChange:C,required:!0}),Object(b.jsx)("label",{children:"Nombre de personnes"})]}),_("capacity"),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{"aria-label":"nom pour la r\xe9servation",type:"text",minlength:"2",name:"clientName",onChange:C,required:!0}),Object(b.jsx)("label",{children:"Votre nom"})]}),_("clientName"),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{"aria-label":"num\xe9ro de t\xe9l\xe9phone",type:"tel",name:"clientPhone",onChange:C,required:!0}),Object(b.jsx)("label",{children:"T\xe9l\xe9phone"})]}),_("clientPhone"),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{"aria-label":"votre adresse email",type:"email",name:"clientEmail",onChange:C}),Object(b.jsx)("label",{children:"Email (optionnel)"})]}),_("clientEmail"),Object(b.jsxs)("div",{className:"information-text",children:["Nos tables accueillent jusqu'\xe0 ",e," couverts. ",Object(b.jsx)("br",{}),"Si vous souhaitez r\xe9server pour un plus grand nombre de personnes, merci de nous appeler directement."]}),Object(b.jsx)("button",{type:"submit",onSubmit:R,className:"mui-btn mui-btn--raised",children:"R\xe9server"})]})]})})]})},oe=function(){return Object(b.jsxs)("div",{className:"Reservation",children:[Object(b.jsx)("h2",{className:"sub-title",children:"R\xe9server une table"}),Object(b.jsx)(le,{})]})},ue=function(){return Object(b.jsxs)("div",{className:"Contact",children:[Object(b.jsxs)("div",{className:"contact",children:[Object(b.jsx)("p",{className:"col-title",children:"CONTACT"}),Object(b.jsxs)("p",{"data-testid":"pepperoni-phone-number",children:[Object(b.jsx)("i",{className:"fas fa-phone fa-sm icon"})," 01 23 45 67 89"]})]}),Object(b.jsxs)("div",{className:"contact",children:[Object(b.jsx)("p",{className:"col-title",children:"NOS RESEAUX SOCIAUX"}),Object(b.jsxs)("div",{children:[Object(b.jsx)("a",{href:"/",noopener:"true",children:Object(b.jsx)("i",{className:"fab fa-facebook-f fa-2x icon"})}),Object(b.jsx)("a",{href:"/",noopener:"true",children:Object(b.jsx)("i",{className:"fab fa-instagram fa-2x icon"})})]})]})]})},de=function(){return Object(b.jsxs)("div",{className:"Location",children:[Object(b.jsx)("p",{className:"col-title",children:"NOTRE ADRESSE"}),Object(b.jsx)("p",{children:"Restaurant Pepperoni"}),Object(b.jsx)("p",{children:"123 avenue d'Italie"}),Object(b.jsx)("p",{children:"75013 Paris"})]})},je=function(){return Object(b.jsxs)("div",{className:"Timetable",children:[Object(b.jsx)("p",{className:"col-title",children:"HORAIRES D'OUVERTURE"}),Object(b.jsx)("div",{className:"table",children:Object(b.jsx)("table",{children:Object(b.jsxs)("tbody",{children:[Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Lundi"}),Object(b.jsx)("td",{children:"Ferm\xe9"})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Mardi"}),Object(b.jsx)("td",{children:"Ferm\xe9 le midi"}),Object(b.jsx)("td",{children:"19h - 23h"})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Mercredi"}),Object(b.jsx)("td",{children:"12h - 15h"}),Object(b.jsx)("td",{children:"19h - 23h"})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Jeudi"}),Object(b.jsx)("td",{children:"12h - 15h"}),Object(b.jsx)("td",{children:"19h - 23h"})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Vendredi"}),Object(b.jsx)("td",{children:"12h - 15h"}),Object(b.jsx)("td",{children:"19h - 23h"})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Samedi"}),Object(b.jsx)("td",{children:"12h - 15h"}),Object(b.jsx)("td",{children:"19h - 23h"})]}),Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Dimanche"}),Object(b.jsx)("td",{children:"12h - 15h"}),Object(b.jsx)("td",{children:"Ferm\xe9 le soir"})]})]})})})]})},be=function(){return Object(b.jsxs)("footer",{className:"Footer flex-row sp-btw align-start",children:[Object(b.jsx)(ue,{}),Object(b.jsx)(de,{}),Object(b.jsx)(je,{})]})},me=function(){var e,t,a=Object(d.c)((function(e){return e.authStore})),r=Object(d.b)();return Object(b.jsxs)("div",{className:"LoginForm form-container",children:[Object(b.jsxs)("form",{className:"mui-form",onSubmit:function(e){var t;e.preventDefault(),r((t={pseudo:e.target.elements[0].value,password:e.target.elements[1].value},function(){var e=Object(x.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.login(t);case 3:r=e.sent,localStorage.setItem("sessionCookie",JSON.stringify(r.data.cookie)),localStorage.setItem("sessionUser",JSON.stringify(r.data.user)),a({type:"auth/login",payload:{user:r.data.user,message:r.data.successMessage}}),e.next=12;break;case 9:e.prev=9,e.t0=e.catch(0),a(w("auth/login_error",e.t0));case 12:case"end":return e.stop()}}),e,null,[[0,9]])})));return function(t){return e.apply(this,arguments)}}())),setTimeout((function(){r((function(e){e({type:"auth/clearMessages"})}))}),4e3),e.target.elements[1].value=""},children:[Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"text",name:"pseudo",required:!0}),Object(b.jsx)("label",{children:"Pseudo"})]}),(null===(e=a.invalidCredentials)||void 0===e?void 0:e.pseudo)&&Object(b.jsxs)("div",{className:"form-error-msg",children:[Object(b.jsx)("i",{className:"fas fa-exclamation-triangle"}),"   ",a.invalidCredentials.pseudo]}),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"password",name:"password",required:!0}),Object(b.jsx)("label",{children:"Mot de passe"})]}),(null===(t=a.invalidCredentials)||void 0===t?void 0:t.password)&&Object(b.jsxs)("div",{className:"form-error-msg",children:[Object(b.jsx)("i",{className:"fas fa-exclamation-triangle"}),"   ",a.invalidCredentials.password]}),Object(b.jsx)("button",{type:"submit",className:"mui-btn edit",children:"Valider"})]}),a.successMessage&&Object(b.jsx)("div",{className:"info-box",children:a.successMessage})]})},pe=function(){return Object(b.jsxs)("div",{className:"Login AdminPage",children:[Object(b.jsxs)("header",{className:"form-header",children:[Object(b.jsx)("h2",{className:"sub-title",children:"Espace r\xe9serv\xe9 au personnel"}),Object(b.jsx)("h3",{children:"Entrez vos identifiants"})]}),Object(b.jsx)(me,{})]})},he=function(){document.title="Admin | r\xe9servations";var e=Object(d.b)();Object(r.useEffect)((function(){e($())}),[e]);var t=Object(d.c)((function(e){return e.reservationStore.reservations})),a=Object(d.c)((function(e){return e.reservationStore.successMessage})),s=function(){var t=Object(x.a)(f.a.mark((function t(a,r){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,e(te(a._id,r._id));case 2:return t.next=4,e($());case 4:setTimeout((function(){e((function(e){e({type:"reservation/clearMessages"})}))}),5e3);case 5:case"end":return t.stop()}}),t)})));return function(e,a){return t.apply(this,arguments)}}();return Object(b.jsxs)("div",{className:"ReservationList AdminPage",children:[Object(b.jsx)("h2",{className:"sub-title",children:"G\xe9rer les r\xe9servations"}),Object(b.jsxs)("table",{className:"table",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Date"}),Object(b.jsx)("th",{children:"Heure"}),Object(b.jsx)("th",{children:"Table"}),Object(b.jsx)("th",{children:"Couverts"}),Object(b.jsx)("th",{children:"Nom"}),Object(b.jsx)("th",{children:"T\xe9l\xe9phone"}),Object(b.jsx)("th",{children:"Email"}),Object(b.jsx)("th",{})]})}),Object(b.jsx)("tbody",{children:null===t||void 0===t?void 0:t.map((function(e){return e.tables.map((function(t){return Object(b.jsxs)("tr",{className:"reservation row",children:[Object(b.jsx)("td",{children:e.date.toLocaleString("fr-FR").slice(0,10)}),Object(b.jsx)("td",{children:e.time}),Object(b.jsx)("td",{children:t.tableName}),Object(b.jsx)("td",{children:t.capacity}),Object(b.jsx)("td",{children:t.reservation[0].clientName}),Object(b.jsx)("td",{children:t.reservation[0].clientPhone}),Object(b.jsx)("td",{children:t.reservation[0].clientEmail}),Object(b.jsx)("td",{children:Object(b.jsx)("button",{type:"submit",onClick:function(){return function(e,t){var a=prompt("Etes-vous s\xfbr(e) de vouloir supprimer cette r\xe9servation ? => ".concat(e.date.toLocaleString("fr-FR").slice(0,10)," \xe0 ").concat(e.time,", au nom de ").concat(t.reservation[0].clientName,". Si oui, entrez 'o'."),"non");null!==a&&"o"===a.toLowerCase()?s(e,t):console.log("Abort delete")}(e,t)},className:"mui-btn mui-btn delete",children:Object(b.jsx)("i",{className:"fas fa-trash-alt fa-sm"})})})]},t._id)}))}))})]}),a&&Object(b.jsx)("div",{className:"info-box",children:a})]})},Oe=function(e,t){console.log("Trying to delete =>",e);var a=prompt("Etes-vous s\xfbr(e) de vouloir supprimer ".concat(e,' ? \nSi oui, entrez "o".'),"non");null!==a&&"o"===a.toLowerCase()?t():console.log("Abort delete")},fe=Object(l.withRouter)((function(e){var t=Object(d.c)((function(e){return e.foodStore})),a=Object(d.b)(),s=Object(r.useState)(),n=Object(L.a)(s,2),c=n[0],i=n[1],l=Object(r.useState)(!1),u=Object(L.a)(l,2),j=u[0],m=u[1],p=Object(r.useState)(!1),h=Object(L.a)(p,2),O=h[0],v=h[1];Object(r.useEffect)((function(){c?"dessert"===c.category?c.foodName&&c.price?v(!1):v(!0):c.foodName&&c.price&&c.description?v(!1):v(!0):v(!1)}),[c]);return Object(b.jsx)("div",{className:"EditMenuForm form-container",children:Object(b.jsxs)("form",{className:"mui-form",onChange:function(e){return i(Object(o.a)(Object(o.a)({},c),{},Object(X.a)({},e.target.name,e.target.value)))},onSubmit:function(e){e.preventDefault();var r=function(){var e=Object(x.a)(f.a.mark((function e(){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,a(B(c));case 2:t.errorMessage||m(!0),setTimeout((function(){m(!1),a((function(e){e({type:"food/clearMessages"})}))}),6e3);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();!function(e,t){console.log("Trying to create =>",e);var a=prompt("Etes-vous s\xfbr(e) de vouloir ajouter ".concat(e,' ? \nSi oui, entrez "o".'),"non");null!==a&&"o"===a.toLowerCase()?t():console.log("Abort create")}(c.foodName,r)},children:[Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"text",name:"foodName",required:!0}),Object(b.jsx)("label",{children:"Nom"})]}),Object(b.jsxs)("div",{className:"mui-select mui-select--float-label",children:[Object(b.jsxs)("select",{name:"category",required:!0,children:[Object(b.jsx)("option",{hidden:!0}),Object(b.jsx)("option",{disabled:"disabled",default:!0,children:"Choisir une cat\xe9gorie de plat"}),Object(b.jsx)("option",{value:"antipasti",children:"antipasti"}),Object(b.jsx)("option",{value:"principal",children:"principal"}),Object(b.jsx)("option",{value:"dessert",children:"dessert"})]}),Object(b.jsx)("label",{children:"Cat\xe9gorie"})]}),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"number",name:"price",min:"1",required:!0}),Object(b.jsx)("label",{children:"Prix"})]}),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("textarea",{name:"description"}),Object(b.jsx)("label",{children:"Description"})]}),Object(b.jsx)(b.Fragment,{children:O?Object(b.jsxs)("div",{className:"form-error-msg",children:[Object(b.jsx)("i",{className:"fas fa-exclamation-triangle"})," Veuillez renseigner tous les champs. ",Object(b.jsx)("br",{})]}):t.errorMessage?Object(b.jsxs)("div",{className:"form-error-msg",children:[Object(b.jsx)("i",{className:"fas fa-exclamation-triangle"})," ",t.errorMessage.foodName,Object(b.jsx)("br",{})]}):j?Object(b.jsxs)("div",{className:"info-box",children:[c.foodName," a bien \xe9t\xe9 ajout\xe9 \xe0 la carte."]}):void 0}),Object(b.jsx)("div",{className:"information-text",children:"La description n'est pas requise pour les desserts."}),Object(b.jsxs)("div",{className:"btn-group flex-row sp-btw",children:[Object(b.jsxs)("button",{type:"submit",disabled:O,className:"mui-btn edit",children:[Object(b.jsx)("i",{className:"fas fa-save"})," Enregistrer"]}),Object(b.jsxs)("button",{type:"button",onClick:function(){return e.history.go(0)},className:"mui-btn mui-btn--flat mui",children:[Object(b.jsx)("i",{className:"fas fa-times"})," Effacer le formulaire"]})]})]})})})),xe=Object(l.withRouter)((function(e){var t=Object(d.b)();Object(r.useEffect)((function(){t(J())}),[t]);var a=Object(d.c)((function(e){return e.foodStore.menu})),s=Object(r.useState)({}),n=Object(L.a)(s,2),c=n[0],i=n[1],l=Object(r.useState)(!1),u=Object(L.a)(l,2),j=u[0],m=u[1],p=!c.foodName||!c.price||null,h=function(e){if("pickedMeal"===e.target.name){var t=e.target.value,r=a.filter((function(e){return e._id===t}))[0];i(Object(o.a)(Object(o.a)({},r),{},{description:r.description||""}))}else i(Object(o.a)(Object(o.a)({},c),{},Object(X.a)({},e.target.name,e.target.value)))},O=function(){var e=Object(x.a)(f.a.mark((function e(a){return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:a.preventDefault(),t(G(c._id,c)),m(!0),setTimeout((function(){m(!1)}),6e3);case 4:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(b.jsx)("div",{className:"EditMenuForm form-container",children:Object(b.jsxs)("form",{className:"mui-form",onSubmit:O,children:[Object(b.jsxs)("div",{className:"mui-select",children:[Object(b.jsxs)("select",{name:"pickedMeal",id:"pickedMeal",required:!0,onChange:h,children:[Object(b.jsx)("option",{hidden:!0,children:"Plats de la carte"}),Object(b.jsx)("option",{disabled:"disabled",default:!0,children:"Plats de la carte"}),a.map((function(e){return Object(b.jsx)("option",{value:e._id,children:e.foodName},e._id)}))]}),Object(b.jsx)("label",{children:"Plat \xe0 modifier"})]}),c._id&&Object(b.jsxs)(b.Fragment,{children:[Object(b.jsxs)("div",{className:"mui-textfield",children:[Object(b.jsx)("input",{type:"text",name:"foodName",value:c.foodName,required:!0,onChange:h}),Object(b.jsx)("label",{children:"Modifier le nom"})]}),Object(b.jsxs)("div",{className:"mui-select",children:[Object(b.jsxs)("select",{name:"category",value:c.category,required:!0,onChange:h,children:[Object(b.jsx)("option",{hidden:!0,children:c.category&&"Cat\xe9gorie initiale : ".concat(c.category)}),Object(b.jsxs)("option",{disabled:"disabled",default:!0,children:["Cat\xe9gorie initiale : ",c.category]}),Object(b.jsx)("option",{value:"antipasti",children:"antipasti"}),Object(b.jsx)("option",{value:"principal",children:"principal"}),Object(b.jsx)("option",{value:"dessert",children:"dessert"})]}),Object(b.jsx)("label",{children:"Modifier la cat\xe9gorie"})]}),Object(b.jsxs)("div",{className:"mui-textfield",children:[Object(b.jsx)("input",{type:"number",value:c.price,name:"price",min:"1",required:!0,onChange:h}),Object(b.jsx)("label",{children:"Modifier le prix"})]}),Object(b.jsxs)("div",{className:"mui-textfield",children:[Object(b.jsx)("textarea",{value:c.description,name:"description",onChange:h}),Object(b.jsx)("label",{children:"Modifier la description"})]}),j&&Object(b.jsx)("div",{className:"info-box",children:"Vos modifications ont bien \xe9t\xe9 prises en compte."}),p&&Object(b.jsxs)("div",{className:"form-error-msg",children:[Object(b.jsx)("i",{className:"fas fa-exclamation-triangle"})," Veuillez renseigner tous les champs."]}),Object(b.jsxs)("button",{type:"button",onClick:function(e){var t=a.filter((function(e){return e._id===c._id}))[0];i(t)},className:"mui-btn mui-btn--flat mui",children:[Object(b.jsx)("i",{className:"fas fa-times"})," Effacer les modifications"]}),Object(b.jsxs)("div",{className:"btn-group flex-row sp-btw",children:[Object(b.jsxs)("button",{type:"button",onClick:function(e){Oe(c.foodName,(function(){var e;t((e=c._id,function(){var t=Object(x.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,V.deleteMeal(e);case 3:r=t.sent,a({type:"food/delete",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(z("food/delete_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}())),i({}),document.getElementById("pickedMeal").value=""}))},className:"mui-btn mui-btn--flat mui",children:[Object(b.jsx)("i",{className:"fas fa-trash-alt"})," Supprimer le plat"]}),Object(b.jsxs)("button",{type:"submit",disabled:p,className:"mui-btn edit",children:[Object(b.jsx)("i",{className:"fas fa-pen-fancy"})," Modifier"]})]})]})]})})})),ve=Object(l.withRouter)((function(e){return document.title="Admin | modification menu",Object(b.jsxs)("div",{className:"EditMenu AdminPage",children:["update"===e.match.params.mode&&Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsxs)("header",{className:"form-header",children:[Object(b.jsx)("h2",{className:"sub-title",children:"Modifier la carte"}),Object(b.jsx)(i.b,{to:"/menu",className:"nav-link",target:"_blank",children:"Voir la carte"}),Object(b.jsx)(i.b,{to:"/admin/menu/create",className:"nav-link",children:"Ajouter un plat"})]}),Object(b.jsx)(xe,{})]}),"create"===e.match.params.mode&&Object(b.jsxs)(s.a.Fragment,{children:[Object(b.jsxs)("header",{className:"form-header",children:[Object(b.jsx)("h2",{className:"sub-title",children:"Ajouter un plat"}),Object(b.jsx)(i.b,{to:"/menu",className:"nav-link",target:"_blank",children:"Voir la carte"})]}),Object(b.jsx)(fe,{})]})]})})),ge=g.a.create({baseURL:"https://pepperoni-restaurant.vercel.app/api/users",withCredentials:!0}),Ne={service:ge,getAllUsers:function(){return ge.get("/")},getOneUser:function(e){return ge.get("/".concat(e))},deleteUser:function(e){return ge.delete("/delete/".concat(e))},updateUser:function(e,t){return ge.patch("/edit/".concat(e),t)}},ye=Ne,Me=function(e,t){return{type:e,error:!0,payload:t}},we=function(){return function(){var e=Object(x.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,ye.getAllUsers();case 3:a=e.sent,t({type:"users/getAllUsers",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(Me("users/getAllUsers_error",e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()},Se=function(e){return function(){var t=Object(x.a)(f.a.mark((function t(a){var r;return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,ye.deleteUser(e);case 3:r=t.sent,a({type:"users/delete",payload:r.data}),t.next=10;break;case 7:t.prev=7,t.t0=t.catch(0),a(Me("users/delete_error",t.t0));case 10:case"end":return t.stop()}}),t,null,[[0,7]])})));return function(e){return t.apply(this,arguments)}}()},ke=function(){var e=Object(d.c)((function(e){return e.authStore})),t=Object(d.b)(),a=function(){var e=Object(x.a)(f.a.mark((function e(a){var r;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return a.preventDefault(),r={lastName:a.target.elements[0].value,firstName:a.target.elements[1].value,email:a.target.elements[2].value,password:a.target.elements[3].value,privileges:a.target.elements[4].value},e.next=4,t(S(r));case 4:return e.next=6,t(we());case 6:setTimeout((function(){t((function(e){e({type:"auth/clearMessages"})}))}),5e3);case 7:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),r=function(t){var a;if(null===(a=e.invalidCredentials)||void 0===a?void 0:a[t])return Object(b.jsxs)("div",{className:"form-error-msg",children:[Object(b.jsx)("i",{className:"fas fa-exclamation-triangle"}),"   ",e.invalidCredentials[t]]})};return Object(b.jsxs)("div",{className:"EmployeeRegistrationForm form-container",children:[Object(b.jsx)("h3",{children:"Enregistrer un(e) nouvel(le) employ\xe9(e)"}),Object(b.jsxs)("form",{className:"mui-form",onSubmit:a,children:[Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"text",name:"lastName",required:!0}),Object(b.jsx)("label",{children:"Nom"})]}),r("lastName"),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"text",name:"firstName",required:!0}),Object(b.jsx)("label",{children:"Pr\xe9nom"})]}),r("firstName"),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"email",name:"email",required:!0}),Object(b.jsx)("label",{children:"Email"})]}),r("email"),Object(b.jsxs)("div",{className:"mui-textfield mui-textfield--float-label",children:[Object(b.jsx)("input",{type:"password",name:"email",required:!0}),Object(b.jsx)("label",{children:"Mot de passe"})]}),r("password"),Object(b.jsxs)("div",{className:"mui-select mui-select--float-label",children:[Object(b.jsxs)("select",{name:"privileges",required:!0,children:[Object(b.jsx)("option",{hidden:!0}),Object(b.jsx)("option",{disabled:"disabled",default:!0,children:"Choisir une cat\xe9gorie (manager et chef sont admin)"}),Object(b.jsx)("option",{value:"admin",children:"Manager ou Chef"}),Object(b.jsx)("option",{value:"employee",children:"Serveur(euse) ou commis"})]}),Object(b.jsx)("label",{children:"Cat\xe9gorie d'emploi"})]}),r("privileges"),Object(b.jsx)("button",{type:"submit",className:"mui-btn mui-btn--flat mui",children:"Enregistrer"})]}),e.successMessage&&Object(b.jsx)("div",{className:"info-box",children:e.successMessage})]})},_e=function(){var e=Object(d.c)((function(e){return e.userStore})),t=Object(d.c)((function(e){return e.authStore})),a=Object(r.useState)(null),s=Object(L.a)(a,2),n=s[0],c=s[1],i=Object(d.b)();Object(r.useEffect)((function(){i(we())}),[i]);var l=function(t){var a=t.target.value,r=e.users.find((function(e){return e._id===a})),s=function(){var t=Object(x.a)(f.a.mark((function t(){return f.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,i(Se(a));case 2:return t.next=4,i(we());case 4:e.errorMessage||c(r),setTimeout((function(){c(null)}),3e3);case 6:case"end":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();Oe("".concat(r.firstName," ").concat(r.lastName," du staff"),s)};return Object(b.jsxs)(b.Fragment,{children:[n&&Object(b.jsxs)("div",{className:"info-box",children:["Vous venez de supprimer ",n.firstName," ",n.lastName," du staff."]}),Object(b.jsxs)("table",{className:"table of-employees",children:[Object(b.jsx)("thead",{children:Object(b.jsxs)("tr",{children:[Object(b.jsx)("th",{children:"Nom"}),Object(b.jsx)("th",{children:"Pr\xe9nom"}),Object(b.jsx)("th",{children:"Pseudo"}),Object(b.jsx)("th",{children:"Status"}),Object(b.jsx)("th",{})]})}),Object(b.jsx)("tbody",{children:e.users.map((function(e){return Object(b.jsxs)("tr",{className:"row",children:[Object(b.jsx)("td",{children:e.lastName}),Object(b.jsx)("td",{children:e.firstName}),Object(b.jsx)("td",{children:e.pseudo}),Object(b.jsx)("td",{children:"admin"===e.privileges?"Manager/Chef(fe)":"Serveur(euse)/Commis"}),Object(b.jsx)("td",{children:t.user._id!==e._id&&Object(b.jsx)("button",{type:"submit",value:e._id,onClick:l,className:"mui-btn mui-btn delete",children:"x"})})]},e._id)}))})]})]})},Ce=function(){return document.title="Admin | personnel",Object(b.jsxs)("div",{className:"EmployeesList AdminPage",children:[Object(b.jsx)("h2",{className:"sub-title",children:"Liste du personnel"}),Object(b.jsxs)("div",{className:"flex-row sp-btw align-start",children:[Object(b.jsx)(_e,{}),Object(b.jsx)(ke,{})]})]})};var Re,Ee=function(){return Object(b.jsx)(i.a,{children:Object(b.jsxs)("div",{className:"App",children:[Object(b.jsx)(R,{}),Object(b.jsxs)(l.Switch,{children:[Object(b.jsx)(l.Route,{exact:!0,path:"/",component:T}),Object(b.jsx)(l.Route,{exact:!0,path:"/menu",component:H}),Object(b.jsx)(l.Route,{exact:!0,path:"/reservation",component:oe}),Object(b.jsx)(l.Route,{path:"/admin/login",component:pe}),Object(b.jsx)(p,{path:"/admin/staff",component:Ce}),Object(b.jsx)(p,{path:"/admin/reservations",component:he}),Object(b.jsx)(p,{path:"/admin/menu/:mode(create|update)",component:ve}),Object(b.jsx)(l.Route,{path:"*",component:h})]}),Object(b.jsx)(be,{})]})})},Ae=a(35),Le=a(94),Ue={isAuthentificated:!1,user:null,successMessage:null,invalidCredentials:null,warningMessage:null},De=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ue,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"auth/registerUser":return Object(o.a)(Object(o.a)({},e),{},{successMessage:t.payload.successMessage||null,invalidCredentials:null});case"auth/registerUser_error":case"auth/login_error":return Object(o.a)(Object(o.a)({},e),{},{invalidCredentials:t.payload.response.data.errors||null});case"auth/login":return Object(o.a)(Object(o.a)({},e),{},{isAuthentificated:!!t.payload,user:t.payload.user||null,successMessage:t.payload.message||null});case"auth/isLoggedIn":return Object(o.a)(Object(o.a)({},e),{},{isAuthentificated:!!t.payload,user:t.payload.user||null});case"auth/isLoggedIn_error":return Object(o.a)(Object(o.a)({},e),{},{isAuthentificated:!1,user:null,invalidCredentials:t.payload.response.data.errors||null});case"auth/logout":return Object(o.a)(Object(o.a)({},e),{},{isAuthentificated:!1,user:null,successMessage:t.payload.successMessage||null});case"auth/clearMessages":return Object(o.a)(Object(o.a)({},e),{},{successMessage:null,invalidCredentials:null,warningMessage:null});default:return e}},Ie={users:[],errorMessages:null},Pe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Ie,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"users/getAllUsers":return console.log("reducer got : "+t.payload.length+" employees"),Object(o.a)(Object(o.a)({},e),{},{users:t.payload});case"users/getAllUsers_error":case"users/getUser_error":case"users/update_error":case"users/delete_error":return console.log("reducer got an error :",t.payload),Object(o.a)(Object(o.a)({},e),{},{errorMessages:t.payload.response.data.errors});case"users/getUser":return Object(o.a)(Object(o.a)({},e),{},{pickedUser:t.payload});case"users/update":return Object(o.a)(Object(o.a)({},e),{},{users:e.users.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"users/delete":return Object(o.a)(Object(o.a)({},e),{},{users:e.users.filter((function(e){return e._id!==t.payload._id}))});default:return e}},Te={menu:[],errorMessage:null},qe=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Te,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"food/getMenu":return Object(o.a)(Object(o.a)({},e),{},{menu:t.payload});case"food/getMenu_error":return console.log("reducer => fail to get the menu: ",t.payload),Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/getMeal":return Object(o.a)(Object(o.a)({},e),{},{pickedMeal:t.payload});case"food/getMeal_error":return console.log("reducer => fail to getting a meal:",t.payload),Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/create":return Object(o.a)(Object(o.a)({},e),{},{menu:[].concat(Object(Q.a)(e.menu),[t.payload])});case"food/create_error":return console.log("reducer => fail to create meal:",t.payload.response.data.errors),Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/update":return Object(o.a)(Object(o.a)({},e),{},{menu:e.menu.map((function(e){return e._id===t.payload._id?t.payload:e}))});case"food/update_error":return console.log("reducer => fail to update meal:",t.payload),Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/delete":return console.log("deleted : ",t.payload),Object(o.a)(Object(o.a)({},e),{},{menu:e.menu.filter((function(e){return e._id!==t.payload._id}))});case"food/delete_error":return console.log("reducer => fail to delete meal:",t.payload),Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"food/clearMessages":return Object(o.a)(Object(o.a)({},e),{},{errorMessage:null});default:return e}},Fe={reservations:[],slot:null,client:null,isAvailable:!1,tables:[],message:null,successMessage:null,errorMessage:null},Ve=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"reservation/getReservations":return Object(o.a)(Object(o.a)({},e),{},{reservations:t.payload.bookedTables,message:t.payload.message||null});case"reservation/getReservations_error":return console.log("reducer => fail to get the reservations: ",t.payload),Object(o.a)(Object(o.a)({},e),{},{reservations:[],errorMessage:t.payload.response.data.errors});case"reservation/slot":return Object(o.a)(Object(o.a)({},e),{},{slot:t.payload.slot});case"reservation/slot_error":return console.log("reducer => fail to create/get slot :",t.payload.response.data.errors),Object(o.a)(Object(o.a)({},e),{},{slot:null,errorMessage:t.payload.response.data.errors});case"reservation/create":return Object(o.a)(Object(o.a)({},e),{},{slot:t.payload.slot,successMessage:t.payload.successMessage});case"reservation/create_error":return console.log("reducer => fail to create reservation:",t.payload.response.data.errors),Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"reservation/cancel":return console.log("canceled : ",t.payload),Object(o.a)(Object(o.a)({},e),{},{successMessage:t.payload.successMessage,reservations:e.reservations.filter((function(e){return e._id!==t.payload.slot._id}))});case"reservation/cancel_error":return console.log("reducer => failed to cancel reservation:",t.payload),Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"tables/getAll":return console.log("list of tables : ",t.payload),Object(o.a)(Object(o.a)({},e),{},{tables:t.payload.tables});case"tables/getAll_error":return console.log("reducer => failed to get tables:",t.payload),Object(o.a)(Object(o.a)({},e),{},{errorMessage:t.payload.response.data.errors});case"reservation/clearMessages":return Object(o.a)(Object(o.a)({},e),{},{message:null,successMessage:null,errorMessage:null});default:return e}},ze=Object(Ae.b)({authStore:De,userStore:Pe,foodStore:qe,reservationStore:Ve}),Je=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||Ae.c,Be=Object(Ae.d)(ze,Je(Object(Ae.a)(Le.a)));if(localStorage.sessionCookie&&localStorage.sessionUser){var Ge=JSON.parse(localStorage.sessionCookie),He=JSON.parse(localStorage.sessionUser);Be.dispatch({type:"auth/isLoggedIn",payload:{user:He}});var Xe=new Date;new Date(Ge.expires).getTime()<Xe.getTime()?(console.log("Session ended >>> Redirection to homepage."),localStorage.removeItem("sessionCookie"),localStorage.removeItem("sessionUser"),Be.dispatch({type:"auth/logout",payload:{successMessage:"La session a expir\xe9e. Reconnectez-vous."}})):Be.dispatch((Re=He._id,function(){var e=Object(x.a)(f.a.mark((function e(t){var a;return f.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,M.isLoggedIn(Re);case 3:a=e.sent,t({type:"auth/isLoggedIn",payload:a.data}),e.next=10;break;case 7:e.prev=7,e.t0=e.catch(0),t(w("auth/isLoggedIn_error",e.t0));case 10:case"end":return e.stop()}}),e,null,[[0,7]])})));return function(t){return e.apply(this,arguments)}}()))}else localStorage.removeItem("sessionCookie"),localStorage.removeItem("sessionUser");c.a.render(Object(b.jsx)(d.a,{store:Be,children:Object(b.jsx)(Ee,{})}),document.getElementById("root"))}},[[186,1,2]]]);
//# sourceMappingURL=main.8e217712.chunk.js.map